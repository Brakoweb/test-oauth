{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/brako/Documents/proyectos/test/test%20oauth/lib/session.js"],"sourcesContent":["import { SignJWT, jwtVerify } from 'jose';\nimport { cookies } from 'next/headers';\n\nconst secret = new TextEncoder().encode(process.env.SESSION_SECRET);\nconst COOKIE_NAME = 'ghl_session';\n\nexport async function setSession(data) {\n  const token = await new SignJWT(data)\n    .setProtectedHeader({ alg: 'HS256' })\n    .setExpirationTime('7d')\n    .sign(secret);\n\n  const cookieStore = await cookies();\n  \n  // Use secure: true for ngrok (HTTPS) even in development\n  const isSecure = process.env.HOST?.startsWith('https://') || process.env.NODE_ENV === 'production';\n  \n  cookieStore.set(COOKIE_NAME, token, {\n    httpOnly: true,\n    secure: isSecure,\n    sameSite: 'lax',  // Always use 'lax' for same-site navigation\n    maxAge: 60 * 60 * 24 * 7, // 7 days\n    path: '/',\n  });\n  \n  return token;\n}\n\nexport async function getSession() {\n  const cookieStore = await cookies();\n  const token = cookieStore.get(COOKIE_NAME)?.value;\n\n  if (!token) return null;\n\n  try {\n    const { payload } = await jwtVerify(token, secret);\n    return payload;\n  } catch (error) {\n    return null;\n  }\n}\n\nexport async function clearSession() {\n  const cookieStore = await cookies();\n  cookieStore.delete(COOKIE_NAME);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;;;AAEA,MAAM,SAAS,IAAI,cAAc,MAAM,CAAC,QAAQ,GAAG,CAAC,cAAc;AAClE,MAAM,cAAc;AAEb,eAAe,WAAW,IAAI;IACnC,MAAM,QAAQ,MAAM,IAAI,gKAAO,CAAC,MAC7B,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,iBAAiB,CAAC,MAClB,IAAI,CAAC;IAER,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,yDAAyD;IACzD,MAAM,WAAW,QAAQ,GAAG,CAAC,IAAI,EAAE,WAAW,eAAe,oDAAyB;IAEtF,YAAY,GAAG,CAAC,aAAa,OAAO;QAClC,UAAU;QACV,QAAQ;QACR,UAAU;QACV,QAAQ,KAAK,KAAK,KAAK;QACvB,MAAM;IACR;IAEA,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,cAAc;IAE5C,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,oKAAS,EAAC,OAAO;QAC3C,OAAO;IACT,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;AACrB"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/brako/Documents/proyectos/test/test%20oauth/constants/server/index.js"],"sourcesContent":["import qs from \"qs\";\n\nconst GHL_BASE={\n    OAUTH: 'https://marketplace.gohighlevel.com/oauth',\n    BASE: 'https://services.leadconnectorhq.com',\n    VERSION: '2021-07-28',\n    USER_TYPE: 'Company'\n}\n\nconst GHL_API={\n    authorize:({config})=>`${GHL_BASE.OAUTH}/chooselocation?${qs.stringify(config)}`,\n    token: `${GHL_BASE.BASE}/oauth/token`,\n    redirect_uri: `${process.env.HOST}/${process.env.GHL_OAUTH_REDIRECT_URI}`\n    \n}\n\nexport {\n    GHL_BASE,\n    GHL_API\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,WAAS;IACX,OAAO;IACP,MAAM;IACN,SAAS;IACT,WAAW;AACf;AAEA,MAAM,UAAQ;IACV,WAAU,CAAC,EAAC,MAAM,EAAC,GAAG,GAAG,SAAS,KAAK,CAAC,gBAAgB,EAAE,6IAAE,CAAC,SAAS,CAAC,SAAS;IAChF,OAAO,GAAG,SAAS,IAAI,CAAC,YAAY,CAAC;IACrC,cAAc,GAAG,QAAQ,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,QAAQ,GAAG,CAAC,sBAAsB,EAAE;AAE7E"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/brako/Documents/proyectos/test/test%20oauth/services/GHL/OAuth/index.js"],"sourcesContent":["import { headers } from \"next/headers.js\";\nimport axios from \"axios\";\nimport { GHL_API, GHL_BASE } from \"../../../constants/server/index.js\";\n\nexport class GoHighLevelOAuthService {\n    static authorize(){\n        return GHL_API.authorize({\n            config: {\n                client_id: process.env.GHL_CLIENT_ID,\n                redirect_uri: GHL_API.redirect_uri,\n                response_type: 'code',\n                scope: process.env.GHL_OAUTH_SCOPES\n            }\n});\n    }\n\n    static async redirect({code}){\n        try{\n            const payload={\n                code,\n                client_id: process.env.GHL_CLIENT_ID,\n                client_secret: process.env.GHL_CLIENT_SECRET,\n                redirect_uri: GHL_API.redirect_uri,\n                grant_type: 'authorization_code',\n                user_type: GHL_BASE.USER_TYPE\n            }\n            const {data, status}=await axios.post(GHL_API.token,payload,{\n                headers:{\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                }\n            });\n            return data;\n        }catch(error){\n           console.log(`--GHL OAuth redirect failed, reason: ${error?.message}`); \n        }\n    }\n\n    static async getContacts({ accessToken, locationId }) {\n        try {\n            console.log('--GHL fetching contacts for locationId:', locationId);\n            \n            const { data } = await axios.post(\n                `${GHL_BASE.BASE}/contacts/search`,\n                {\n                    locationId: locationId,\n                    pageLimit: 100\n                },\n                {\n                    headers: {\n                        'Authorization': `Bearer ${accessToken}`,\n                        'Version': GHL_BASE.VERSION,\n                        'Content-Type': 'application/json',\n                    },\n                }\n            );\n            console.log('--GHL get contacts success, count:', data.contacts?.length || 0);\n            return data.contacts || [];\n        } catch (error) {\n            console.log(`--GHL get contacts failed, reason: ${error?.message}`);\n            if (error.response) {\n                console.log('Response status:', error.response.status);\n                console.log('Response data:', JSON.stringify(error.response.data));\n            }\n            return [];\n        }\n    }\n\n    static async getUserByEmail({ accessToken, locationId, email }) {\n        try {\n            console.log('--GHL fetching user by email:', email);\n            \n            // Filter users by email (POST request)\n            const { data } = await axios.post(\n                `${GHL_BASE.BASE}/users/search/filter-by-email`,\n                {\n                    locationId: locationId,\n                    email: email\n                },\n                {\n                    headers: {\n                        'Authorization': `Bearer ${accessToken}`,\n                        'Version': GHL_BASE.VERSION,\n                        'Content-Type': 'application/json',\n                    },\n                }\n            );\n            console.log('--GHL search user success:', data);\n            \n            // Return first matching user\n            if (data.users && data.users.length > 0) {\n                return data.users[0];\n            }\n            \n            // If no users array, maybe the response is directly the user\n            if (data.id) {\n                return data;\n            }\n            \n            return null;\n        } catch (error) {\n            console.log(`--GHL search user failed, reason: ${error?.message}`);\n            if (error.response) {\n                console.log('Response status:', error.response.status);\n                console.log('Response data:', JSON.stringify(error.response.data));\n            }\n            return null;\n        }\n    }\n\n    static async getUserInfo({ accessToken, userId }) {\n        try {\n            console.log('--GHL fetching user info for userId:', userId);\n            \n            const { data } = await axios.get(\n                `${GHL_BASE.BASE}/users/${userId}`,\n                {\n                    headers: {\n                        'Authorization': `Bearer ${accessToken}`,\n                        'Version': GHL_BASE.VERSION,\n                    },\n                }\n            );\n            console.log('--GHL get user info success:', data);\n            return data;\n        } catch (error) {\n            console.log(`--GHL get user info failed, reason: ${error?.message}`);\n            if (error.response) {\n                console.log('Response status:', error.response.status);\n                console.log('Response data:', JSON.stringify(error.response.data));\n            }\n            return null;\n        }\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///Users/brako/Documents/proyectos/test/test%20oauth/src/app/dashboard/page.js"],"sourcesContent":["import { getSession } from '../../../lib/session.js';\nimport { GoHighLevelOAuthService } from '../../../services/GHL/OAuth/index.js';\nimport { redirect } from 'next/navigation';\nimport { cookies } from 'next/headers';\n\nexport default async function DashboardPage({ searchParams }) {\n  const params = await searchParams;\n  const locationIdFromUrl = params?.locationId;\n  const userIdFromUrl = params?.userId;\n  const errorParam = params?.error;\n  const errorMessage = params?.message;\n\n  // SSO Flow: Redirect to SSO handler if locationId and userId are present\n  if (locationIdFromUrl && userIdFromUrl) {\n    redirect(`/api/sso?locationId=${locationIdFromUrl}&userId=${userIdFromUrl}`);\n  }\n\n  // Handle SSO errors\n  if (errorParam) {\n    let errorTitle = 'Error';\n    let errorDescription = 'Ocurri贸 un error durante la autenticaci贸n.';\n    \n    switch (errorParam) {\n      case 'missing_params':\n        errorTitle = 'Par谩metros faltantes';\n        errorDescription = 'Se requieren locationId y userId en la URL.';\n        break;\n      case 'no_tokens':\n        errorTitle = '锔 Location No Autorizada';\n        errorDescription = `No hay tokens guardados para la location: ${locationIdFromUrl || 'N/A'}`;\n        break;\n      case 'user_not_found':\n        errorTitle = 'Usuario no encontrado';\n        errorDescription = `No se pudo obtener la informaci贸n del usuario con ID: ${params?.userId || 'N/A'}`;\n        break;\n      case 'server_error':\n        errorTitle = 'Error del servidor';\n        errorDescription = errorMessage || 'Ocurri贸 un error inesperado.';\n        break;\n    }\n\n    return (\n      <div style={{ padding: '2rem', maxWidth: '800px', margin: '0 auto' }}>\n        <div style={{ \n          border: '2px solid #ef4444', \n          borderRadius: '8px', \n          padding: '2rem',\n          backgroundColor: '#fef2f2'\n        }}>\n          <h1 style={{ color: '#b91c1c', marginTop: 0 }}>{errorTitle}</h1>\n          \n          <p style={{ marginBottom: '1.5rem' }}>\n            {errorDescription}\n          </p>\n\n          {errorParam === 'no_tokens' && (\n            <div style={{ \n              backgroundColor: '#fff7ed', \n              border: '1px solid #fb923c',\n              borderRadius: '6px',\n              padding: '1rem',\n              marginBottom: '1.5rem'\n            }}>\n              <p style={{ margin: 0, fontSize: '0.95em' }}>\n                <strong> Soluci贸n:</strong> Un administrador de esta location debe autorizar \n                la aplicaci贸n primero. Cada location en GoHighLevel requiere su propia autorizaci贸n.\n              </p>\n            </div>\n          )}\n\n          <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\n            <a \n              href=\"/api/v2/authorize\" \n              style={{ \n                display: 'inline-block',\n                padding: '0.75rem 1.5rem',\n                backgroundColor: '#3b82f6',\n                color: 'white',\n                textDecoration: 'none',\n                borderRadius: '6px',\n                fontWeight: 'bold'\n              }}\n            >\n              Autorizar como Admin\n            </a>\n            \n            <a \n              href=\"/admin/locations\" \n              style={{ \n                display: 'inline-block',\n                padding: '0.75rem 1.5rem',\n                backgroundColor: '#6b7280',\n                color: 'white',\n                textDecoration: 'none',\n                borderRadius: '6px',\n                fontWeight: 'bold'\n              }}\n            >\n              Ver Locations Autorizadas\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Check existing session\n  const session = await getSession();\n  \n  // Debug: Check if cookie exists\n  const cookieStore = await cookies();\n  const rawCookie = cookieStore.get('ghl_session');\n  console.log('[Dashboard] Raw cookie present:', !!rawCookie);\n  console.log('[Dashboard] Session loaded:', { \n    isAdmin: session?.isAdmin, \n    userId: session?.userId,\n    email: session?.userInfo?.email,\n    hasAccessToken: !!session?.accessToken\n  });\n\n  if (!session || !session.accessToken) {\n    return (\n      <div style={{ padding: '2rem', maxWidth: '600px', margin: '0 auto' }}>\n        <div style={{ \n          border: '2px solid #3b82f6',\n          borderRadius: '8px',\n          padding: '2rem',\n          backgroundColor: '#eff6ff',\n          textAlign: 'center'\n        }}>\n          <h1 style={{ color: '#1e40af', marginTop: 0 }}> Sesi贸n no iniciada</h1>\n          \n          <div style={{ marginBottom: '2rem', textAlign: 'left' }}>\n            <p style={{ marginBottom: '1rem' }}>\n              <strong> 驴Eres un usuario normal?</strong>\n            </p>\n            <p style={{ marginBottom: '1rem', paddingLeft: '1rem', fontSize: '0.95em' }}>\n              Accede a trav茅s del <strong>Custom Menu Link</strong> en GoHighLevel. \n              No necesitas autorizar nada, el acceso es autom谩tico.\n            </p>\n\n            <div style={{ \n              borderTop: '1px solid #bfdbfe',\n              marginTop: '1.5rem',\n              marginBottom: '1.5rem'\n            }}></div>\n\n            <p style={{ marginBottom: '1rem' }}>\n              <strong> 驴Eres un administrador?</strong>\n            </p>\n            <p style={{ marginBottom: '1rem', paddingLeft: '1rem', fontSize: '0.95em' }}>\n              Autoriza la aplicaci贸n una sola vez por location para que los usuarios puedan acceder.\n            </p>\n            \n            <div style={{ textAlign: 'center', marginTop: '1.5rem' }}>\n              <a \n                href=\"/api/v2/authorize\" \n                style={{ \n                  display: 'inline-block',\n                  padding: '0.75rem 1.5rem',\n                  backgroundColor: '#3b82f6',\n                  color: 'white',\n                  textDecoration: 'none',\n                  borderRadius: '6px',\n                  fontWeight: 'bold'\n                }}\n              >\n                Autorizar como Admin\n              </a>\n            </div>\n          </div>\n\n          <div style={{ \n            fontSize: '0.85em',\n            color: '#6b7280',\n            marginTop: '1.5rem',\n            paddingTop: '1rem',\n            borderTop: '1px solid #bfdbfe'\n          }}>\n             <strong>Nota:</strong> Cerrar sesi贸n no borra la autorizaci贸n del admin. \n            Los tokens se mantienen seguros en la base de datos.\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  let contacts = [];\n  let error = null;\n\n  try {\n    contacts = await GoHighLevelOAuthService.getContacts({\n      accessToken: session.accessToken,\n      locationId: session.locationId\n    });\n  } catch (err) {\n    error = err.message;\n  }\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '1200px', margin: '0 auto' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>\n        <h1 style={{ margin: 0 }}>Dashboard de Contactos</h1>\n        <div style={{ display: 'flex', gap: '1rem', alignItems: 'center' }}>\n          <div style={{\n            padding: '0.5rem 1rem',\n            borderRadius: '4px',\n            backgroundColor: session.isAdmin ? '#dbeafe' : '#fef3c7',\n            color: session.isAdmin ? '#1e40af' : '#92400e',\n            fontWeight: 'bold',\n            fontSize: '0.875rem'\n          }}>\n            {session.isAdmin ? ' ADMIN' : ' USUARIO'}\n          </div>\n          <a \n            href=\"/api/logout\"\n            style={{\n              padding: '0.5rem 1rem',\n              borderRadius: '4px',\n              backgroundColor: '#ef4444',\n              color: 'white',\n              textDecoration: 'none',\n              fontSize: '0.875rem',\n              fontWeight: 'bold'\n            }}\n          >\n             Cerrar Sesi贸n\n          </a>\n        </div>\n      </div>\n      \n      {/* User Information Section */}\n      {session.userInfo && (\n        <div style={{ \n          backgroundColor: '#f0f9ff', \n          padding: '1.5rem', \n          borderRadius: '8px', \n          marginBottom: '2rem',\n          border: '1px solid #0ea5e9'\n        }}>\n          <h2 style={{ marginTop: 0, marginBottom: '1rem', color: '#0369a1' }}>\n            Informaci贸n del Usuario\n          </h2>\n          <div style={{ display: 'grid', gridTemplateColumns: 'auto 1fr', gap: '0.5rem 1.5rem' }}>\n            <strong>Nombre:</strong>\n            <span>{session.userInfo.name || (session.userInfo.firstName && session.userInfo.lastName ? `${session.userInfo.firstName} ${session.userInfo.lastName}` : 'N/A')}</span>\n            \n            <strong>Email:</strong>\n            <span>{session.userInfo.email || session.userEmail || 'N/A'}</span>\n            \n            <strong>User ID:</strong>\n            <span style={{ fontFamily: 'monospace', fontSize: '0.9em' }}>{session.userId || session.userInfo.id || 'N/A'}</span>\n            \n            <strong>Location ID:</strong>\n            <span style={{ fontFamily: 'monospace', fontSize: '0.9em' }}>{session.locationId || 'N/A'}</span>\n            \n            <strong>Rol:</strong>\n            <span>{session.userInfo.role || 'N/A'}</span>\n            \n            {session.userInfo.permissions && (\n              <>\n                <strong>Permisos:</strong>\n                <span style={{ fontSize: '0.85em', wordBreak: 'break-word' }}>\n                  {JSON.stringify(session.userInfo.permissions, null, 2)}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n      \n      {error && (\n        <div style={{ backgroundColor: '#fee', padding: '1rem', borderRadius: '4px', marginBottom: '1rem' }}>\n          <p style={{ color: 'red' }}>Error: {error}</p>\n        </div>\n      )}\n\n      {contacts.length === 0 && !error ? (\n        <p>No se encontraron contactos.</p>\n      ) : (\n        <div style={{ overflowX: 'auto' }}>\n          <table style={{ width: '100%', borderCollapse: 'collapse', border: '1px solid #ddd' }}>\n            <thead>\n              <tr style={{ backgroundColor: '#f5f5f5' }}>\n                <th style={{ padding: '12px', textAlign: 'left', borderBottom: '2px solid #ddd' }}>Nombre</th>\n                <th style={{ padding: '12px', textAlign: 'left', borderBottom: '2px solid #ddd' }}>Email</th>\n                <th style={{ padding: '12px', textAlign: 'left', borderBottom: '2px solid #ddd' }}>Tel茅fono</th>\n              </tr>\n            </thead>\n            <tbody>\n              {contacts.map((contact, index) => (\n                <tr key={contact.id || index} style={{ borderBottom: '1px solid #eee' }}>\n                  <td style={{ padding: '12px' }}>\n                    {contact.firstName || ''} {contact.lastName || ''}\n                  </td>\n                  <td style={{ padding: '12px' }}>{contact.email || '-'}</td>\n                  <td style={{ padding: '12px' }}>{contact.phone || '-'}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          <p style={{ marginTop: '1rem', color: '#666' }}>\n            Total de contactos: {contacts.length}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}