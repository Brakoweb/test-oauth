{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/brako/Documents/proyectos/test/test%20oauth/constants/server/index.js"],"sourcesContent":["import qs from \"qs\";\n\nconst GHL_BASE={\n    OAUTH: 'https://marketplace.gohighlevel.com/oauth',\n    BASE: 'https://services.leadconnectorhq.com',\n    VERSION: '2021-07-28',\n    USER_TYPE: 'Company'\n}\n\nconst GHL_API={\n    authorize:({config})=>`${GHL_BASE.OAUTH}/chooselocation?${qs.stringify(config)}`,\n    token: `${GHL_BASE.BASE}/oauth/token`,\n    redirect_uri: `${process.env.HOST}/${process.env.GHL_OAUTH_REDIRECT_URI}`\n    \n}\n\nexport {\n    GHL_BASE,\n    GHL_API\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,WAAS;IACX,OAAO;IACP,MAAM;IACN,SAAS;IACT,WAAW;AACf;AAEA,MAAM,UAAQ;IACV,WAAU,CAAC,EAAC,MAAM,EAAC,GAAG,GAAG,SAAS,KAAK,CAAC,gBAAgB,EAAE,+IAAE,CAAC,SAAS,CAAC,SAAS;IAChF,OAAO,GAAG,SAAS,IAAI,CAAC,YAAY,CAAC;IACrC,cAAc,GAAG,QAAQ,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,QAAQ,GAAG,CAAC,sBAAsB,EAAE;AAE7E"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///Users/brako/Documents/proyectos/test/test%20oauth/services/GHL/OAuth/index.js"],"sourcesContent":["import { headers } from \"next/headers.js\";\nimport axios from \"axios\";\nimport { GHL_API, GHL_BASE } from \"../../../constants/server/index.js\";\n\nexport class GoHighLevelOAuthService {\n    static authorize(){\n        return GHL_API.authorize({\n            config: {\n                client_id: process.env.GHL_CLIENT_ID,\n                redirect_uri: GHL_API.redirect_uri,\n                response_type: 'code',\n                scope: process.env.GHL_OAUTH_SCOPES\n            }\n});\n    }\n\n    static async redirect({code}){\n        try{\n            const payload={\n                code,\n                client_id: process.env.GHL_CLIENT_ID,\n                client_secret: process.env.GHL_CLIENT_SECRET,\n                redirect_uri: GHL_API.redirect_uri,\n                grant_type: 'authorization_code',\n                user_type: GHL_BASE.USER_TYPE\n            }\n            const {data, status}=await axios.post(GHL_API.token,payload,{\n                headers:{\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                }\n            });\n            return data;\n        }catch(error){\n           console.log(`--GHL OAuth redirect failed, reason: ${error?.message}`); \n        }\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,MAAM;IACT,OAAO,YAAW;QACd,OAAO,yIAAO,CAAC,SAAS,CAAC;YACrB,QAAQ;gBACJ,WAAW,QAAQ,GAAG,CAAC,aAAa;gBACpC,cAAc,yIAAO,CAAC,YAAY;gBAClC,eAAe;gBACf,OAAO,QAAQ,GAAG,CAAC,gBAAgB;YACvC;QACZ;IACI;IAEA,aAAa,SAAS,EAAC,IAAI,EAAC,EAAC;QACzB,IAAG;YACC,MAAM,UAAQ;gBACV;gBACA,WAAW,QAAQ,GAAG,CAAC,aAAa;gBACpC,eAAe,QAAQ,GAAG,CAAC,iBAAiB;gBAC5C,cAAc,yIAAO,CAAC,YAAY;gBAClC,YAAY;gBACZ,WAAW,0IAAQ,CAAC,SAAS;YACjC;YACA,MAAM,EAAC,IAAI,EAAE,MAAM,EAAC,GAAC,MAAM,kJAAK,CAAC,IAAI,CAAC,yIAAO,CAAC,KAAK,EAAC,SAAQ;gBACxD,SAAQ;oBACJ,gBAAgB;gBACpB;YACJ;YACA,OAAO;QACX,EAAC,OAAM,OAAM;YACV,QAAQ,GAAG,CAAC,CAAC,qCAAqC,EAAE,OAAO,SAAS;QACvE;IACJ;AACJ"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///Users/brako/Documents/proyectos/test/test%20oauth/src/app/api/v2/%5Baction%5D/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { GoHighLevelOAuthService } from \"../../../../../services/GHL/OAuth/index.js\";\n\nexport async function GET(req, res) {\n    try{\n        const {action}= await res.params;\n        switch(action){\n            case 'authorize':\n                return NextResponse.redirect(GoHighLevelOAuthService.authorize());\n            case 'redirect':\n                const { code } = Object.fromEntries(req.nextUrl.searchParams);\n                if(!code){\n                    return NextResponse.redirect(process.env.GHL_OAUTH_FAIL);\n                }\n\n                await GoHighLevelOAuthService.redirect({code});\n                return NextResponse.redirect(process.env.GHL_OAUTH_SUCCESS);    \n        }\n        return NextResponse.json({message: 'Accion invalida'}, {status: 400})\n    }catch(error){\n        return NextResponse.json({error: error.message}, {status: 500})\n    }\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAG,EAAE,GAAG;IAC9B,IAAG;QACC,MAAM,EAAC,MAAM,EAAC,GAAE,MAAM,IAAI,MAAM;QAChC,OAAO;YACH,KAAK;gBACD,OAAO,gJAAY,CAAC,QAAQ,CAAC,8JAAuB,CAAC,SAAS;YAClE,KAAK;gBACD,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,WAAW,CAAC,IAAI,OAAO,CAAC,YAAY;gBAC5D,IAAG,CAAC,MAAK;oBACL,OAAO,gJAAY,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC,cAAc;gBAC3D;gBAEA,MAAM,8JAAuB,CAAC,QAAQ,CAAC;oBAAC;gBAAI;gBAC5C,OAAO,gJAAY,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC,iBAAiB;QAClE;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,SAAS;QAAiB,GAAG;YAAC,QAAQ;QAAG;IACvE,EAAC,OAAM,OAAM;QACT,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,OAAO,MAAM,OAAO;QAAA,GAAG;YAAC,QAAQ;QAAG;IACjE;AACJ"}}]
}